<!DOCTYPE html>
<html>

<head>

  <title>MMO RPG</title>

  <link rel="stylesheet" href="style.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script>



        /*
        var socket = new WebSocket("wss://asdf.dy.fi:3001/ws");
        //var socket = new WebSocket("ws://localhost:3001/ws");

        socket.onmessage = function (evt) {
            var data = JSON.parse(evt.data);

            if (data.result == "register") {
                alert(data.message);
            }
            else if (data.result == "error") {
                alert(data.message);
            }

        }
*/

/*
        function register(){

            if (document.getElementById("password").value != document.getElementById("password2").value) {
                alert("passwords don't match");
                return;
            }


            var jiison = { "action": "register", "name": document.getElementById("name").value, "password": document.getElementById("password").value};
            var payload = JSON.stringify(jiison);
            socket.send(payload);

        }
        */


        $.get(
            "servers",
            {},
            function(data) {
                console.log(data["servers"]);

                data["servers"].forEach(function (item, index) {
                      console.log(item, index);
                    document.getElementById('serverList').innerHTML += item["name"] + ", Players: " + item["playerCount"] + " " + "<a href=" + item["address"] + "> Join </a>" + "<br>"
                });

            }
        );

    </script>
</head>


<body>

 <img id="banner" src="banner.png" alt="Site banner">


    <div id="navBar">
      <table style="width:100%">
         <tr>
           <td><a href="index.html">Home</a></td>
           <td><a href="register.html">Register</a></td>
           <td><a href="about.html">About</a></td>
         </tr>
      </table>
    </div>

    <br>
    <br>

    <div id="listDiv">

          <div id="serverList" class="serverList">
              Server list: <br>
          </div>
     </div>

<br>
<br>

    <br>


</body>
</html>
